<%= nested_form_for(@proceso, html: { class: "form-horizontal", role: "form" }) do |f| %>
  <% if proceso.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(proceso.errors.count, "error") %> prohibited this proceso from being saved:</h2>
      <ul>
      <% proceso.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div class="box-body">
    <div class="row align-items-center">
      <div class="col-xs-4">
        <label for="tipo_proceso_id">Tipo de Proceso</label>
        <%= f.select :tipo_proceso_id, options_for_select(@tipos_procesos.collect { |r| [r.nombre, r.id ]}, @tipo_proceso), {prompt: 'Seleccione tipo de proceso'}, class: "js-tipo-placeholder-single selectpicker form-control"%>
      </div>
      <div class="col-xs-4">
        <label for="cliente_id">Cliente</label>
        <%= f.select :cliente_id, options_for_select(@clientes.collect { |r| [r.nombre, r.id ]}, @cliente), {prompt: 'Seleccione el cliente'}, class: "js-procesos-placeholder-single selectpicker form-control"%>
      </div>
      <div class="col-xs-4">
        <label for="empleado_id">Encargado</label>
        <%= f.select :empleado_id, options_for_select(@empleados.collect { |r| [r.nombre, r.id ]}, @empleado), {prompt: 'Seleccione el empleado'}, class: "js-empleado-placeholder-single selectpicker form-control"%>
      </div> 
      <div class="col-xs-4">
        <label for="doc_numero">Numero de documento</label>
        <%= f.text_field :doc_numero, class: "form-control"%>
      </div>

      <div class="col-xs-4">
        <label for="referencia">Referencia</label>
        <%= f.text_field :referencia, class: "form-control"%>
      </div>

      <div class="col-xs-4">
        <label for="estado">Estado</label>
        <%= f.text_field :estado, class: "form-control", :value => @estado, readonly: true%>
      </div>
      <div class="col-xs-6">
        <label for="fecha_ingreso">Fecha de Ingreso</label>
        <%= f.text_field :fecha_ingreso, class: "datepicker form-control", :value => @fecha_ingreso, "data-date-format"=>"dd/mm/yyyy"%>
      </div>
      <div class="col-xs-6">
        <label for="fecha_salida">Fecha de Salida</label>
        <%= f.text_field :fecha_salida, class: "datepicker form-control", :value => @fecha_salida, "data-date-format"=>"dd/mm/yyyy"%>
      </div>

      <div class="col-xs-12">
        <label for="descripcion">Descripcion</label>
        <%= f.text_field :descripcion, class: "form-control"%>
      </div>

       <div class="col-xs-12">
        <div class="box box-solid">
          <div class="box-header with-border">
            <h3 class="box-title">Etapas del proceso</h3>
            <div class="box-tools pull-right">
              <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
            </div>
          </div>
          
          <div class="box-body">
            <table id="detalles", class="table table-striped table-responsive">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Estado</th>
                  <th>Fecha Limite</th>
                </tr>
              </thead>
              <tbody>
                <%= render :partial => 'detalles_fields', :locals => { :f => f }, remote:true%>
              </tbody>
            </table>
            <tr>
             <%= f.link_to_add "", :proceso_detalles, :data => { :target => "#detalles" },  :class => "btn btn-sm glyphicon glyphicon-plus", title: 'Agregar detalle', 'data-toggle' => 'tooltip', 'data-placement' => 'rigth' %>
            </tr>
          </div>
        </div>
      </div>

      

      <div class="col-xs-12 modal-footer" > 
          <%= link_to "Cancelar", procesos_path, class: "btn btn-default", style:"color:black" %>
          <%= f.submit "Guardar", class: "btn btn-primary", id: "guardar" %>
      </div>
      <% end %>
    </div> 
  </div>
  
